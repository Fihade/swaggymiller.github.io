<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>MillerLiang</title>
  <link rel="shortcut icon" href="/images/favicon.ico">
  <!-- Jquery -->
  <script src="https://cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:400,700|Roboto+Condensed:700">
  <!-- prettify -->
  <link rel="stylesheet" href="/prettify/atelier-sulphurpool-light.min.css">
  <script src="/prettify/prettify.js"></script>

  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/script.js"></script>
</head>
  <body>
    <div class="container">
    
      <header>
  <div class="header">
    <div class="blog-title">
      <a href="/" class="logo">MillerLiang</a>
    </div>
    <nav class="navbar hidden-xs-only">
      <ul class="menu">
        
          <li class="menu-item">
            <a href="/" class="menu-item-link">Home</a>
          </li>
        
          <li class="menu-item">
            <a href="/archives" class="menu-item-link">Archives</a>
          </li>
        
          <li class="menu-item">
            <a href="https://github.com/swaggymiller" class="menu-item-link">Github</a>
          </li>
        
      </ul>
    </nav>
  </div>

  <nav class="header-nav hidden-sm-and-up">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">Archives</a>
        </li>
      
        <li class="menu-item">
          <a href="https://github.com/swaggymiller" class="menu-item-link">Github</a>
        </li>
      
    </ul>
  </nav>
  
</header>
      <main class="main">
        <article class="post">
  <div class="post-title">
    <h2 class="title">ğŸ˜‚å¤šè“ç‰™è¿æ¥è¯´æ˜æ–‡æ¡£</h2>
  </div>
   <div class="post-meta">
    <span class="post-time">2018-08-11</span>
    <span class="post-author"></span>
  </div>
  <div class="post-content">
    <p>ä¸€ã€å‚æ•°å‰æï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BluetoothAdapter mBluetoothAdapter</span><br><span class="line">BluetoothManager bluetoothManager</span><br><span class="line">BleLink bleLink</span><br><span class="line">ArrayMap&lt;String, BleLink&gt; bleLinks = new ArrayMap&lt;&gt;()</span><br><span class="line">ArrayList&lt;ArrayMap&lt;String, String&gt;&gt; listData = new ArrayList&lt;&gt;()</span><br><span class="line">ArrayMap&lt;String, ArrayMap&gt; address = new ArrayMap&lt;&gt;()</span><br><span class="line">LinkBlueTooth mlinkbluetooth</span><br></pre></td></tr></table></figure>
<p>äºŒã€ç›¸å…³æ¥å£ï¼š</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public boolean StartScan(String name, int timeout)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>String name  æ‰«æè“ç‰™å</p>
<p>int timeout   å¯ä»¥è®¾ç½®å»¶è¿Ÿï¼ˆè¿™é‡Œæ²¡æœ‰å¼•ç”¨ï¼‰</p>
<p>é€šè¿‡å¾ªç¯è·å–è“ç‰™åä¸ºï¼ˆâ€addr â€œï¼‰çš„è“ç‰™ï¼ŒåŠ å…¥è‡³bleLinké˜Ÿåˆ—</p>
<p>è¿”å›å€¼æ˜¯å¦æ‰«ææˆåŠŸ</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public boolean LinkDevice(String addr)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿æ¥è®¾å¤‡å¹¶è¿”å›å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String addr = listData.get(position).get(&quot;addr&quot;);</span><br><span class="line"> if (bleLinks.containsKey(addr)) &#123;</span><br><span class="line">     int idNum = bleLinks.get(addr).id;</span><br><span class="line">     bleLinks.get(addr).dislink();</span><br><span class="line">     bleLinks.remove(addr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒ¹é…æ•°æ®è¡¨ä¸­çš„(â€œaddrâ€)çš„ç›¸å…³è®¾å¤‡ï¼Œå½“å¤šäº2ä¸ªæ—¶åˆ é™¤ä¹‹å‰é˜Ÿåˆ—</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void DislinkDevice(String addr)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ–­è¿è®¾å¤‡</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public int GetDeviceState()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è·å–è®¾å¤‡çŠ¶æ€ï¼ˆè¿æ¥/æœªè¿æ¥/æ— æ³•è¿æ¥ï¼‰</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public boolean SendData(byte[] data)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å‘é€æ•°æ®æœ€å¤š128bitçš„æ•°æ®</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public byte[] ReceiveData()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è·å–æ•°æ®ï¼ŒåŒä¸Š</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void OnDeviceStateChanged(BleLink bleLink, BleDeviceState state)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æŸ¥çœ‹è®¾å¤‡æ‰€å¤„çŠ¶æ€çš„å˜åŒ–</p>

  </div>
</article>
      </main>
    </div>
  </body>
</html>